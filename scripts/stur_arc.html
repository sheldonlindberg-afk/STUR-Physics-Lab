<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STUR Resistance Arc Simulator â€“ Full Derivation</title>
<style>
  body{
    background-color:#050814;
    color:#e6edf3;
    font-family:'Courier New',monospace;
    margin:0;
    padding:2rem;
  }
  h1{color:#ffaa00;text-align:center;}
  h2{color:#ffcc33;margin-top:2rem;}
  .desc{max-width:900px;margin:0 auto 1.5rem auto;line-height:1.5;}
  pre{
    background:#0a0f1f;
    padding:1rem;
    border-radius:8px;
    overflow-x:auto;
    color:#00ffcc;
    line-height:1.4;
    box-shadow:0 0 20px #ffaa0055;
  }
  button{
    background:#ffaa00;
    color:#050814;
    border:none;
    border-radius:6px;
    padding:10px 20px;
    font-weight:bold;
    cursor:pointer;
    margin:6px;
    transition:0.2s;
  }
  button:hover{background:#ffcc33;}
  footer{
    margin-top:2rem;
    text-align:center;
    font-size:0.9em;
    color:#aaa;
  }
</style>
</head>
<body>

<h1>âš¡ STUR Resistance Arc Simulator â€“ Full Derivation</h1>

<p class="desc">
This lab models a <b>STUR Resistance Arc</b>: a microscopic â€œspringâ€ formed by
electromagnetic, gravitational, and quantum-pressure terms coupled through
the Unified Resistance modulator <code>S(r)</code>. The simulation evolves the arc
for 5&nbsp;seconds (~10&nbsp;000 oscillations) and reports:
effective stiffness, trap frequency, binding energy, coherence, and a small
heat rise from field energy dumping into matter.
</p>

<h2>Derivation Overview (Short Form)</h2>
<div class="desc">
<p>
1. <b>STUR radial modulator</b> sets how resistance couples to radius:
</p>
<pre>S(r) = tanh(r/Lâ‚€) Â· (1 âˆ’ e^{âˆ’r/Lâ‚€})</pre>

<p>
2. <b>Net STUR force</b> combines EM attraction/repulsion, gravity, strong-like
pressure, and a restoring â€œstringâ€ term:
</p>
<pre>F_STUR(r) = S(r) Â· [ k_e qÂ²/rÂ² âˆ’ G m_BÂ²/rÂ² âˆ’ a_s0 (1 âˆ’ e^{âˆ’r/Î»})/rÂ² + Ïƒ r ]</pre>

<p>
3. <b>Magnetic pressure curvature</b> from the background B-field gives an
internal spring term:
</p>
<pre>F_in â‰ˆ âˆ’A_bl Â· dP_B/dr,   K_in â‰ˆ âˆ’A_bl Â· dÂ²P_B/drÂ²</pre>

<p>
4. <b>External confinement</b> from a decaying potential adds:
</p>
<pre>F_out(r) âˆ âˆ’V_b Uâ‚€ e^{âˆ’r/L_s} (2/rÂ³ + 1/(L_s rÂ²))
K_out(r) = dF_out/dr</pre>

<p>
5. Around some reference radius râ‚€ we define a static effective stiffness:
</p>
<pre>K_eff,stat = âˆ’[ K_in + K_out(râ‚€) ],   k_static = clip(K_eff, k_min, k_max)</pre>

<p>
6. <b>Feedback</b> from a shrinking gap d(t) raises the stiffness:
</p>
<pre>k_eff(d) = clip( k_static + k_fb / (d + Îµ), k_min, k_max )</pre>

<p>
7. A simple distance-based damping term:
</p>
<pre>c(d) = câ‚€ Â· sqrt( d / dâ‚€ )</pre>

<p>
8. We then integrate the 1D equation of motion for a mass m_B:
</p>
<pre>m_B xÂ¨ + c(d) xË™ + k_eff(d) x = 0</pre>

<p>
for 5&nbsp;s with a 0.1&nbsp;Âµs timestep, down-sampling for plotting.
From the trajectory x(t) we compute:
RMS displacement, final gap d_final, trap frequency f_trap, binding energy
E_bind, coherence ratio Î·_coh, and temperature rise Î”T from a pulsed dump
of energy into area A_h and mass m_A.
</p>
</div>

<h2>Python Simulation (Copy &amp; Run)</h2>

<pre id="codeBlock">
#!/usr/bin/env python3
"""
STUR Resistance Arc Simulator â€“ 5-Second Runtime (Full Form)
------------------------------------------------------------
- Evolves a STUR resistance "arc spring" for 5 seconds.
- Uses a unified resistance modulator S(r) and multi-force F_STUR(r).
- Includes feedback stiffening as the ring gap d(t) shrinks.
- Outputs:
    * Effective stiffnesses (static & final)
    * Trap frequency and oscillation period
    * RMS displacement and final gap
    * Binding energy and coherence ratio
    * Estimated temperature rise from field energy dump
- Generates two plots:
    1) STUR resistance force vs radius
    2) Arc core displacement vs time over 5 s
"""

import numpy as np
import matplotlib.pyplot as plt
import json

# === Fundamental + STUR parameters ===================================
mu0 = 4*np.pi*1e-7
mB  = 1e-6          # effective "arc mass" [kg]
q   = 1.6e-19       # unit charge [C]

ke  = 8.9875e9      # Coulomb constant [N m^2 / C^2]
G   = 6.6743e-11    # Newton G [N m^2 / kg^2]
as0 = 1e-24         # strong-like coupling scale
sig = 1e3           # string-like restoring coefficient
lam = 1e-15         # strong-force range [m]
L0  = 1e-10         # STUR modulation length [m]

B0, b1, b2 = 5, 500, 5e4
Abl = 3.1e-4        # effective area for magnetic pressure [m^2]
Vb  = 4.19e-6       # confining volume scale [m^3]

U0 = 3e5            # external potential scale
Ls = 1e-2           # external decay length [m]

kB = 1.380649e-23
T0 = 300.0          # ambient temperature [K]

c0  = 6e-3          # base damping coefficient
eps = 1e-15         # gap floor [m]
d0  = 1e-14         # initial gap [m]
kfb = 1e9           # feedback stiffness gain

kmin, kmax = 1e3, 1e4   # clipping for stiffness

# === STUR radial modulator & forces ==================================
def S(r: float) -> float:
    """STUR radial resistance modulator."""
    return np.tanh(r/L0) * (1.0 - np.exp(-r/L0))

def Fstur(r: np.ndarray) -> np.ndarray:
    """
    Net STUR resistance force vs radius r, combining:
    - Coulomb term ~ k_e q^2 / r^2
    - Gravity term ~ - G m_B^2 / r^2
    - Strong-like term ~ -a_s0 (1 - e^{-r/Î»}) / r^2
    - Linear string term ~ Ïƒ r
    all gated by S(r).
    """
    return S(r)*(
        ke*q*q/r**2
        - G*mB*mB/r**2
        - as0*(1.0 - np.exp(-r/lam))/r**2
        + sig*r
    )

def dPB() -> float:
    """First derivative of magnetic pressure (effective)."""
    return (B0*b1)/mu0

def d2PB() -> float:
    """Second derivative of magnetic pressure (curvature)."""
    return (b1**2 + 2*b2*B0)/mu0

Fin0 = -Abl*dPB()     # internal force scale
Kin  = -Abl*d2PB()    # internal curvature

def Fout(r: float) -> float:
    """External confinement force from a decaying potential."""
    return -Vb*U0*np.exp(-r/Ls)*(2.0/r**3 + 1.0/(Ls*r**2))

def Kout(r: float) -> float:
    """Curvature of external confinement."""
    x = 1.0/Ls
    return -Vb*U0*np.exp(-r/Ls)*(
        -6.0/r**4 - 4.0*x/r**3 - x**2/r**2
    )

# === Static effective stiffness at reference radius ==================
r0 = 1e-2
Keff_stat = -(Kin + Kout(r0))
kstat = np.clip(Keff_stat, kmin, kmax)

def keff(d: float) -> float:
    """
    Effective stiffness as the arc gap d shrinks.
    Feedback term k_fb/(d + eps) ramps stiffness at small d.
    """
    return float(np.clip(kstat + kfb/(d + eps), kmin, kmax))

def damp(d: float) -> float:
    """Distance-dependent damping coefficient."""
    return c0 * (d/d0)**0.5

# === Time evolution (5 seconds, down-sampled) ========================
dt = 1e-7        # 0.1 microsecond step
tf = 5.0         # 5 seconds
N  = int(tf/dt)  # raw integration steps

# store only a subset for plotting
Nsample = 500_000
skip    = max(1, N//Nsample)
Nt      = Nsample

x = np.zeros(Nt)
v = np.zeros(Nt)
d = np.zeros(Nt)
d[0] = d0

xi = 0.0
vi = 0.0
di = d0

for i in range(N):
    k = keff(di)
    c = damp(di)
    a = (-k*xi - c*vi)/mB

    vi += a*dt
    xi += vi*dt
    di -= (di - eps)*1e7*dt

    if i % skip == 0:
        j = i//skip
        if j < Nt:
            x[j] = xi
            v[j] = vi
            d[j] = di

# === Derived quantities ==============================================
xrms = float(np.sqrt(np.mean(x**2)))
dfin = float(d[-1])
ftrap = float(np.sqrt(keff(dfin)/mB)/(2.0*np.pi))

rg = np.linspace(1e-12, 1e-9, 400)
Ebind = float(np.trapz(Fstur(rg), rg))
Ebind_eV = Ebind/1.602e-19

coh = float(np.exp(-(kB*T0)/Ebind))

Ppk, tp = 5e5, 5e-3
Ep  = Ppk*tp
eta = 0.3
dump = eta*Ep
Ah   = 2e-2
mA   = 8.0
cp   = 500.0

dT   = (dump/Ah)/(mA*cp)
tau, fR = 0.1, 10.0
Tmean = T0 + dT*fR*tau/0.1

out = {
    "Fin0_N":            Fin0,
    "Kin_N_per_m":       Kin,
    "k_static_N_per_m":  kstat,
    "k_eff_end_N_per_m": keff(dfin),
    "f_trap_Hz":         ftrap,
    "x_rms_m":           xrms,
    "ring_final_m":      dfin,
    "E_bind_eV":         Ebind_eV,
    "coherence_ratio":   coh,
    "dT_K":              dT,
    "T_mean_K":          Tmean
}

# === Human-readable summary ==========================================
print("\n=== STUR Resistance Arc Summary (5 s) ===")
print(f"Static stiffness k_static:      {kstat:8.2e} N/m")
print(f"Final stiffness k_eff(end):     {keff(dfin):8.2e} N/m")
print(f"Trap frequency f_trap:          {ftrap:8.2e} Hz")
print(f"Oscillation period:             {1e3/ftrap:8.3f} ms")
print(f"RMS displacement:               {xrms*1e9:8.3f} nm")
print(f"Final ring gap d_final:         {dfin:8.2e} m")
print(f"Binding energy E_bind:          {Ebind_eV:8.2e} eV")
print(f"Temperature rise Î”T:            {dT:6.3f} K")
print(f"Coherence ratio (stability):    {coh:.3f}")

print("""
Plain-language explanation:
This STUR arc behaves like a microscopic spring built from fields and
resistance instead of metal. Over 5 seconds it rings thousands of times.
If the coherence ratio is high, the oscillations remain ordered and
energy stays trapped instead of quickly diffusing away as heat.
""")

# === Plots ===========================================================
time = np.linspace(0.0, tf, Nt)

plt.figure(figsize=(10, 4))

# Force vs radius
plt.subplot(1, 2, 1)
plt.plot(rg*1e9, Fstur(rg))
plt.xlabel("Radius (nm)")
plt.ylabel("Force (N)")
plt.title("STUR Resistance Force vs Radius")

# Displacement vs time
plt.subplot(1, 2, 2)
plt.plot(time, x*1e9)
plt.xlabel("Time (s)")
plt.ylabel("Displacement (nm)")
plt.title("Arc Core Oscillation over 5 s")

plt.tight_layout()
plt.show()

# === JSON export =====================================================
print("JSON output:")
print(json.dumps(out, indent=2))
</pre>

<p style="text-align:center;margin-top:1rem;">
  <button onclick="copyCode()">ğŸ“‹ Copy Script</button>
  <button onclick="openRunner()">â–¶ Open Python Runner (no sign-up)</button>
</p>
    <!-- ===== STUR Lab Return Button ===== -->
<div style="margin:10px 0 20px 0;">
  <a href="../index.html"
     style="display:inline-block;
            background:#0e1624;
            color:#5ad0ff;
            border:1px solid #5ad0ff;
            padding:8px 14px;
            border-radius:6px;
            text-decoration:none;
            font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
            font-size:0.9em;
            transition:background 0.3s;">
    â† STUR Physics Lab
  </a>
</div>
<!-- ===== End Return Button ===== -->

<p class="desc" style="text-align:center;">
Click <b>Copy Script</b>, then <b>Open Python Runner</b> to launch a JupyterLite
Lab session in your browser (no login). Paste the script into a new notebook
cell, run it, and view the STUR Arc plots and outputs.
</p>

<footer>
  Â© 2025 STUR Physics Lab | Unified Resistance Framework | Arc Reactor Full Derivation
</footer>

<script>
function copyCode(){
  const el = document.getElementById('codeBlock');
  if(!el) return;
  const code = el.innerText;
  navigator.clipboard.writeText(code);
  alert('âœ… STUR Arc script copied to clipboard');
}
function openRunner(){
  // JupyterLite Lab: browser Python with NumPy + Matplotlib, no sign-up
  window.open('https://jupyter.org/try-jupyter/lab/', '_blank');
}
</script>

</body>
</html>
