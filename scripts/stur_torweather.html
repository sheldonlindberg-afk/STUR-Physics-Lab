<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STUR Weather 3D ‚Äì STUR Unified Resistance Atmosphere</title>
<style>
  body {
    background: #050814;
    color: #e6edf3;
    font-family: "Courier New", monospace;
    margin: 0;
    padding: 2rem;
  }
  h1 { color: #ffaa00; text-align: center; }
  h2 { color: #ffcc33; margin-top: 2rem; }
  .desc {
    max-width: 900px;
    margin: 0 auto 1.5rem auto;
    line-height: 1.5;
  }
  pre {
    background: #0a0f1f;
    color: #00ffcc;
    padding: 1rem;
    border-radius: 8px;
    overflow-x: auto;
    font-size: 0.9rem;
    box-shadow: 0 0 18px #ffaa0040;
    white-space: pre;
  }
  button {
    background: #ffaa00;
    color: #050814;
    border: none;
    border-radius: 6px;
    padding: 10px 20px;
    font-weight: bold;
    cursor: pointer;
    margin: 6px;
    transition: 0.2s;
  }
  button:hover { background: #ffcc33; }
  footer {
    text-align: center;
    font-size: 0.9em;
    color: #999;
    margin-top: 2rem;
  }
  a { color: #66ccff; }
</style>
</head>
<body>

<h1>STUR Weather ‚Äì 3D Hybrid Atmospheric Simulation</h1>

<h2>STUR Atmospheric Derivation (3D Volume)</h2>
<div class="desc">
<p>
The STUR unified resistance framework defines atmospheric coupling between electromagnetic,
gravitational, and short-range field gradients through the modulated resistance law:
</p>

<p style="text-align:center;">
F<span style="vertical-align:sub;">STUR</span>(r) =
S(r, L<span style="vertical-align:sub;">0</span>)
[ k<span style="vertical-align:sub;">e</span> q‚ÇÅq‚ÇÇ / r¬≤ ‚àí G m‚ÇÅm‚ÇÇ / r¬≤ + Œ±<span style="vertical-align:sub;">s</span>((1‚àíe<sup>‚àír/Œª</sup>)/r¬≤ + œÉr) ] rÃÇ.
</p>

<p>
The STUR modulator function ensures finite field strength even near r ‚Üí 0:
</p>

<p style="text-align:center;">
S(r,L‚ÇÄ) = tanh(r/L‚ÇÄ)(1‚àíe<sup>‚àír/L‚ÇÄ</sup>).
</p>

<p>
Each atmospheric parcel evolves with (r,v,T,P), driven by both fluid drag and STUR field gradients.
Detected structures: microbursts (vertical collapse), funnels (vorticity), and heat domes (thermal trapping).
</p>
</div>

<h2>Jupyter-Ready Python Code</h2>
<pre>
# ===============================================================
# üå™Ô∏è STUR Weather 3D Simulation ‚Äì Unified Resistance Atmosphere
# ===============================================================
import numpy as np, json

# --- Constants ---
k_e, G, sigma = 8.9875e9, 6.6743e-11, 1e-5
lam, lB = 1e-15, 1e2
q1, q2, m1, m2 = 1e-6, 1e-6, 1e3, 1e3
S_vec, B_vec = np.array([0,0,1]), np.array([0,0,1])
rho, g, nu = 1.2, 9.81, 1e-2

# --- Radial modulator & field force ---
def S_r(r, L0): return np.tanh(r/L0)*(1-np.exp(-r/L0))
def F_sheldon(r, vel, L0=1e5, gamma0=1e-3, alpha_s=1e-9):
    r_norm = max(np.linalg.norm(r), 1e-12)
    r_hat = r / r_norm
    F_rad = S_r(r_norm, L0) * (
        (k_e*q1*q2/r_norm**2 - G*m1*m2/r_norm**2 +
         alpha_s*((1-np.exp(-r_norm/lam))/r_norm**2 + sigma*r_norm)) * r_hat )
    F_spin = gamma0 * np.exp(-r_norm/lB) * np.cross(S_vec, B_vec)[:len(r)]
    return F_rad + F_spin

# --- Grid initialization ---
nx, ny, nz = 8, 8, 8
X, Y, Z = np.meshgrid(np.linspace(-1e3,1e3,nx),
                      np.linspace(-1e3,1e3,ny),
                      np.linspace(0,500,nz))
pos = np.stack([X.flatten(), Y.flatten(), Z.flatten()], axis=-1)
vel = np.zeros_like(pos)
T = np.ones(pos.shape[0]) * 290
P = np.ones_like(T) * 101325

# --- Simulation steps ---
steps = 50
for _ in range(steps):
    vel[:,0] += 0.0001*(pos[:,1]/1e3)  # shear
    for i in range(pos.shape[0]):
        F_fluid = -1/rho*np.array([0,0,(P[i]-101325)/50]) + nu*np.random.randn(3)*0.01
        F_total = F_fluid + F_sheldon(pos[i], vel[i])
        vel[i] += F_total*0.5
        pos[i] += vel[i]*0.5
        T[i] += -g/1000*vel[i,2]*0.5
        P[i] -= 0.05*vel[i,2]*0.5

# --- Event detection ---
microbursts = (vel[:,2] < -10)
funnels = np.linalg.norm(np.cross(vel[:,:2], pos[:,:2]), axis=1) > 0.05
heat_domes = (T > 300)

# --- Summarize results in JSON ---
result = {
  "summary": {
    "total_points": int(len(pos)),
    "microbursts": int(np.sum(microbursts)),
    "funnels": int(np.sum(funnels)),
    "heat_domes": int(np.sum(heat_domes))
  },
  "averages": {
    "T_mean_K": float(np.mean(T)),
    "P_mean_Pa": float(np.mean(P)),
    "vel_mean_mps": float(np.mean(np.linalg.norm(vel,axis=1)))
  },
  "extremes": {
    "T_max_K": float(np.max(T)),
    "P_min_Pa": float(np.min(P))
  }
}

print(json.dumps(result, indent=2))
print("‚úÖ STUR Weather 3D Simulation Complete")
</pre>

<div style="text-align:center;margin-top:1rem;">
  <button onclick="navigator.clipboard.writeText(document.querySelector('pre').innerText)">Copy Code</button>
  <a href="https://jupyterlite.github.io/demo/lab/index.html" target="_blank">
    <button>Open in JupyterLite</button>
  </a>
</div>

<footer>
<p>STUR Physics Framework ¬© 2025 ‚Äî Sheldon L. Lindberg</p>
<p><a href="https://sheldonlindberg-afk.github.io/STUR-Physics-Lab/">Back to STUR Lab Home</a></p>
</footer>

</body>
</html>
