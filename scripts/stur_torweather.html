<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STUR Weather – Simplified 2D Version</title>
<style>
  body{
    background:#050814;
    color:#e6edf3;
    font-family:"Courier New",monospace;
    margin:0;
    padding:2rem;
  }
  h1{color:#ffaa00;text-align:center;}
  h2{color:#ffcc33;margin-top:2rem;}
  pre{
    background:#0a0f1f;color:#00ffcc;padding:1rem;
    border-radius:8px;overflow-x:auto;font-size:0.9rem;
    box-shadow:0 0 18px #ffaa0040;
  }
  button{
    background:#ffaa00;color:#050814;border:none;
    border-radius:6px;padding:10px 20px;font-weight:bold;
    cursor:pointer;margin:6px;transition:0.2s;
  }
  button:hover{background:#ffcc33;}
  footer{text-align:center;font-size:0.9em;color:#999;margin-top:2rem;}
</style>
</head>
<body>

<h1>STUR Weather – Simplified 2D Field Simulation</h1>

<div style="background:#200;color:#ff9999;padding:1rem;border-radius:8px;margin-bottom:2rem;">
<b>Disclaimer:</b> This page was written by ChatGPT, which is known to make mistakes in coding.
Use this simulation for concept visualization only. Check every formula and constant
before scientific use.
</div>

<h2>Overview</h2>
<p>
This version uses a 2D grid instead of 3D to ensure reliability in JupyterLite.
It models a STUR unified resistance field coupling electromagnetic, gravitational,
and strong-like interactions plus spin torque. Atmospheric parcels evolve in time
and generate emergent features (microbursts, funnels, heat domes) shown as 2D scatter plots.
</p>

<h2>Python Simulation (copy and run in Jupyter/JupyterLite)</h2>

<pre id="codeBlock">#!/usr/bin/env python3
# ===============================================================
# STUR Weather 2D – Reliable Version with Event Plots and JSON
# ===============================================================
import numpy as np, matplotlib.pyplot as plt, json

# ---- Constants ----
k_e,G,sigma=8.9875e9,6.6743e-11,1e-5
lam,lB=1e-15,1e2
q1,q2,m1,m2=1e-6,1e-6,1e3,1e3
S,B=np.array([0,0,1]),np.array([0,0,1])
rho,g,nu=1.2,9.81,1e-2
L0,alpha_s,gamma0=1e5,1e-9,1e-3
dt,n_steps=0.5,60
np.random.seed(0)

# ---- STUR Force ----
def S_r(r,L0): return np.tanh(r/L0)*(1-np.exp(-r/L0))
def F_sheldon(r,vel):
    r_norm=max(np.linalg.norm(r),1e-9); r_hat=r/r_norm
    F_rad=S_r(r_norm,L0)*((k_e*q1*q2/r_norm**2-G*m1*m2/r_norm**2+alpha_s*((1-np.exp(-r_norm/lam))/r_norm**2+sigma*r_norm))*r_hat)
    F_spin=gamma0*np.exp(-r_norm/lB)*np.cross(S,B)[:2]
    return F_rad[:2]+F_spin

# ---- 2D Grid ----
nx,ny=25,25
X,Y=np.meshgrid(np.linspace(-1e3,1e3,nx),np.linspace(-1e3,1e3,ny))
pos=np.stack([X.flatten(),Y.flatten()],axis=-1)
vel=np.zeros_like(pos)
T=np.ones(pos.shape[0])*290
P=np.ones_like(T)*101325

# ---- Evolution ----
for step in range(n_steps):
    vel[:,0]+=0.0001*(pos[:,1]/1e3)
    for i in range(pos.shape[0]):
        F_fluid=-1/rho*np.array([0,(P[i]-101325)/50])+nu*np.random.randn(2)*0.01
        F_total=F_fluid+F_sheldon(pos[i],vel[i])
        vel[i]+=F_total*dt
        vel[i]=np.clip(vel[i],-50,50)
        pos[i]+=vel[i]*dt
        T[i]+=-g/1000*vel[i,1]*dt
        P[i]-=0.05*vel[i,1]*dt

# ---- Events ----
microbursts=vel[:,1]&lt;-10
funnels=np.abs(pos[:,0]*vel[:,1]-pos[:,1]*vel[:,0])&gt;0.05
heat_domes=T&gt;300

# ---- 2D Plots ----
def plot_event(mask,color,title):
    plt.figure(figsize=(6,5))
    plt.scatter(pos[:,0],pos[:,1],s=5,c='#444444',alpha=0.3)
    plt.scatter(pos[mask,0],pos[mask,1],s=25,c=color,label=title)
    plt.xlabel('X (m)');plt.ylabel('Y (m)')
    plt.title(title);plt.legend();plt.grid(True);plt.tight_layout();plt.show()

plot_event(microbursts,'cyan','Microbursts (vz&lt;-10)')
plot_event(funnels,'magenta','Funnels (|Lz|&gt;0.05)')
plot_event(heat_domes,'red','Heat Domes (T&gt;300K)')

# ---- JSON Summary ----
summary={
 "model":"STUR Weather 2D",
 "grid":{"nx":int(nx),"ny":int(ny),"n_parcels":int(pos.shape[0])},
 "time":{"dt_s":float(dt),"n_steps":int(n_steps),"total_time_s":float(dt*n_steps)},
 "events":{
  "microbursts_count":int(np.sum(microbursts)),
  "funnels_count":int(np.sum(funnels)),
  "heat_domes_count":int(np.sum(heat_domes))
 },
 "fields":{
  "T_min_K":float(np.min(T)),"T_max_K":float(np.max(T)),
  "P_min_Pa":float(np.min(P)),"P_max_Pa":float(np.max(P)),
  "vy_min":float(np.min(vel[:,1])),"vy_max":float(np.max(vel[:,1]))
 }
}
print(json.dumps(summary,indent=2))
print("STUR Weather 2D simulation complete.")</pre>

<div style="text-align:center;">
  <button onclick="copyCode()">Copy Script</button>
  <button onclick="openRunner()">Open Jupyter Lite</button>
</div>

<footer>
© 2025 STUR Physics Lab | Unified Resistance Framework | Simplified Weather Simulation
</footer>

<script>
function copyCode(){
  const code=document.getElementById("codeBlock").innerText;
  navigator.clipboard.writeText(code);
  alert("STUR Weather 2D code copied to clipboard.");
}
function openRunner(){
  window.open("https://jupyter.org/try-jupyter/lab/","_blank");
}
</script>

</body>
</html>
