<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>STUR Golden Ratio – Perfect Resistance Ratio (R*)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- ----------- STYLE ----------- -->
<style>
    body {
        background:#000;
        color:#e6edf3;
        font-family:'Courier New', monospace;
        margin:0; padding:0;
    }
    h1 {
        text-align:center;
        color:#ffcc33;
        padding-top:20px;
    }
    #container {
        max-width:900px;
        margin:auto;
        padding:20px;
    }
    #codebox {
        background:#0a0a0a;
        border:1px solid #333;
        border-radius:8px;
        padding:10px;
        overflow-x:auto;
        white-space:pre;
        margin-bottom:20px;
    }
    button {
        background:#111;
        color:#ffcc33;
        border:1px solid #ffcc33;
        padding:8px 14px;
        border-radius:4px;
        cursor:pointer;
        margin-right:8px;
        margin-bottom:8px;
    }
    button:hover {
        background:#332200;
    }
    #summary {
        background:#0a0a0a;
        border:1px solid #444;
        border-radius:8px;
        padding:12px;
        margin-top:15px;
        white-space:pre-wrap;
        font-size:0.9rem;
    }
</style>
</head>

<body>
<h1>STUR Golden Ratio – Perfect Resistance Ratio (R*)</h1>

<div id="container">

<p>
In STUR physics, the **Perfect Resistance Ratio** is:
</p>

<pre style="color:#ffaa00; font-size:1.0rem;">
R* = E / (I Φ)
</pre>

<p>
When <strong>R* → 1</strong>, energy, information, and geometric flux enter a state of
<strong>perfect coherence</strong>, the STUR Golden Ratio.
</p>

<!-- ----------- PYTHON CODE (JupyterLite compatible) ----------- -->
<div id="codebox" id="code">
<code id="pycode">
# ===============================================================
# STUR Perfect Resistance Ratio Simulation – R* = E / (I Φ)
# ===============================================================
# Sheldon L. Lindberg (2025)
# JupyterLite-safe: numpy + matplotlib + json
# ===============================================================

import numpy as np
import matplotlib.pyplot as plt
import json

plt.style.use("dark_background")
np.random.seed(42)

# ---------------------- PARAMETERS ------------------------------
E0   = 1.0
I0   = 1.0
Phi0 = 1.0

omega_E   = 2.0 * np.pi * 0.25
omega_I   = 2.0 * np.pi * 0.27
omega_Phi = 2.0 * np.pi * 0.23
k_couple  = 0.15
noise     = 0.02

t = np.linspace(0, 60, 2000)

# ---------------------- DYNAMICS -------------------------------
E   = E0   * (1 + 0.3*np.sin(omega_E*t))
I   = I0   * (1 + 0.3*np.sin(omega_I*t + np.pi/3))
Phi = Phi0 * (1 + 0.3*np.sin(omega_Phi*t + np.pi/5))

for _ in range(3):
    R = E / (I*Phi)
    E -= k_couple * (R - 1) * E + noise*np.random.randn(len(E))*1e-2

R_star = E / (I * Phi)

# ---------------------- OUTPUTS -------------------------------
summary = {
    "R_mean": float(np.mean(R_star)),
    "R_std": float(np.std(R_star)),
    "E_mean": float(np.mean(E)),
    "I_mean": float(np.mean(I)),
    "Phi_mean": float(np.mean(Phi)),
    "Interpretation": "R* ~ 1 → energy, information, and geometry are coherent."
}

print(json.dumps(summary, indent=2))

# ---------------------- PLOT ----------------------------------
fig, ax = plt.subplots(figsize=(8,4))
ax.plot(t, R_star, color="#ffaa00", lw=1.5, label=r"$R_\ast = E/(I\Phi)$")
ax.axhline(1, color="cyan", ls="--", lw=1, label="Perfect Coherence (R*=1)")
ax.set_xlabel("Time (s)")
ax.set_ylabel("R* ratio")
ax.set_title("STUR Perfect Resistance Ratio Simulation")
ax.legend()
plt.show()
</code>
</div>

<!-- ----------- BUTTONS ----------- -->
<button onclick="copyCode()">Copy Code</button>
<button onclick="runPy()">Run in Browser</button>

<div id="summary"></div>

</div>

<!-- ----------- PYODIDE LOADER ----------- -->
<script>
async function runPy() {
    const pyodide = await loadPyodide();
    await pyodide.loadPackage(['matplotlib', 'numpy']);
    let code = document.getElementById("pycode").innerText;

    try {
        pyodide.runPython(code);
        let output = pyodide.runPython("json.dumps(summary, indent=2)");
        document.getElementById("summary").textContent = output;
    } catch (err) {
        document.getElementById("summary").textContent = "Error:\\n" + err;
    }
}

function copyCode() {
    let code = document.getElementById("pycode").innerText;
    navigator.clipboard.writeText(code);
    alert("Code copied!");
}
</script>

<!-- Pyodide CDN -->
<script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>

</body>
</html>
